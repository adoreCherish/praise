{% extends './layout.html' %}
        {% block title %}{{title}}{% endblock %}
        {% block styles %}
        <link rel="stylesheet" type="text/css" href="http://localhost:3000/public/css/vendor.css"/>
        {% endblock %}
        {% block content %}  {% include "../widget/index.html" %} {% endblock %}
        {% block script%}
        <script>
        (function(){
            console.log("http://localhost:3000/public/scripts/vendor.js","http://localhost:3000/public/scripts/index.js","http://localhost:3000/public/scripts/xtag.js");
            var scripts = ["http://localhost:3000/public/scripts/vendor.js","http://localhost:3000/public/scripts/index.js","http://localhost:3000/public/scripts/xtag.js"];
            for(var i=0;i<scripts.length;i++){
                //如果不使用闭包 直接let i= 0;
                (function(i){
                    //如果localstorage中没有缓存 则请求
                    if(!localStorage.getItem(scripts[i])){
                        $.ajax({
                            url:scripts[i],
                            type:'GET'
                        }).then(function(data){
                            console.log('scripts[i] ajax:'+scripts[i]);
                            localStorage.setItem(scripts[i],data);
                        },function(data){

                        })
                        
                    }
                    //localstorage中已经有缓存了
                    else{
                        var scriptHtml = '<script>'+localStorage.getItem(scripts[i])+'</scr'+'ipt>'
                        $(scriptHtml).attr({
                            type:'text/javascript'
                        });
                        $(scriptHtml).appendTo($("head"));
                    }
                })(i)
                
            }
        })()
        </script>
        {% endblock%}